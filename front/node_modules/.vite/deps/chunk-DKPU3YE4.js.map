{
  "version": 3,
  "sources": ["../../echarts/lib/chart/line/LineSeries.js", "../../echarts/lib/chart/line/helper.js", "../../echarts/lib/chart/line/lineAnimationDiff.js", "../../echarts/lib/chart/line/poly.js", "../../echarts/lib/chart/helper/createClipPathFromCoordSys.js", "../../echarts/lib/chart/line/LineView.js", "../../echarts/lib/layout/points.js", "../../echarts/lib/processor/dataSample.js", "../../echarts/lib/chart/line/install.js", "../../echarts/lib/chart/bar/BaseBarSeries.js", "../../echarts/lib/chart/bar/BarSeries.js", "../../echarts/lib/util/shape/sausage.js", "../../echarts/lib/label/sectorLabel.js", "../../echarts/lib/chart/helper/sectorHelper.js", "../../echarts/lib/chart/bar/BarView.js", "../../echarts/lib/chart/bar/install.js", "../../echarts/lib/chart/pie/pieLayout.js", "../../echarts/lib/processor/dataFilter.js", "../../echarts/lib/chart/pie/labelLayout.js", "../../echarts/lib/chart/pie/PieView.js", "../../echarts/lib/chart/helper/createSeriesDataSimply.js", "../../echarts/lib/visual/LegendVisualProvider.js", "../../echarts/lib/chart/pie/PieSeries.js", "../../echarts/lib/processor/negativeDataFilter.js", "../../echarts/lib/chart/pie/install.js", "../../echarts/lib/chart/scatter/ScatterSeries.js", "../../echarts/lib/chart/helper/LargeSymbolDraw.js", "../../echarts/lib/chart/scatter/ScatterView.js", "../../echarts/lib/chart/scatter/install.js", "../../echarts/lib/chart/radar/radarLayout.js", "../../echarts/lib/chart/radar/backwardCompat.js", "../../echarts/lib/chart/radar/RadarView.js", "../../echarts/lib/chart/radar/RadarSeries.js", "../../echarts/lib/chart/radar/install.js", "../../echarts/lib/chart/map/MapView.js", "../../echarts/lib/chart/map/MapSeries.js", "../../echarts/lib/chart/map/mapDataStatistic.js", "../../echarts/lib/chart/map/mapSymbolLayout.js", "../../echarts/lib/chart/map/install.js", "../../echarts/lib/chart/tree/layoutHelper.js", "../../echarts/lib/chart/tree/TreeView.js", "../../echarts/lib/data/helper/linkSeriesData.js", "../../echarts/lib/data/Tree.js", "../../echarts/lib/chart/helper/treeHelper.js", "../../echarts/lib/chart/tree/TreeSeries.js", "../../echarts/lib/chart/tree/traversalHelper.js", "../../echarts/lib/chart/tree/treeLayout.js", "../../echarts/lib/chart/tree/treeVisual.js", "../../echarts/lib/chart/tree/treeAction.js", "../../echarts/lib/chart/tree/install.js", "../../echarts/lib/chart/treemap/treemapAction.js", "../../echarts/lib/chart/helper/enableAriaDecalForTree.js", "../../echarts/lib/chart/treemap/TreemapSeries.js", "../../echarts/lib/chart/treemap/Breadcrumb.js", "../../echarts/lib/util/animation.js", "../../echarts/lib/chart/treemap/TreemapView.js", "../../echarts/lib/chart/treemap/treemapVisual.js", "../../echarts/lib/chart/treemap/treemapLayout.js", "../../echarts/lib/chart/treemap/install.js", "../../echarts/lib/chart/graph/categoryFilter.js", "../../echarts/lib/chart/graph/categoryVisual.js", "../../echarts/lib/chart/graph/edgeVisual.js", "../../echarts/lib/chart/helper/multipleGraphEdgeHelper.js", "../../echarts/lib/chart/graph/simpleLayoutHelper.js", "../../echarts/lib/chart/graph/simpleLayout.js", "../../echarts/lib/chart/graph/graphHelper.js", "../../echarts/lib/chart/graph/circularLayoutHelper.js", "../../echarts/lib/chart/graph/circularLayout.js", "../../echarts/lib/chart/graph/forceHelper.js", "../../echarts/lib/chart/graph/forceLayout.js", "../../echarts/lib/chart/graph/createView.js", "../../echarts/lib/chart/graph/adjustEdge.js", "../../echarts/lib/chart/graph/GraphView.js", "../../echarts/lib/data/Graph.js", "../../echarts/lib/chart/helper/createGraphFromNodeEdge.js", "../../echarts/lib/chart/graph/GraphSeries.js", "../../echarts/lib/chart/graph/install.js", "../../echarts/lib/chart/gauge/PointerPath.js", "../../echarts/lib/chart/gauge/GaugeView.js", "../../echarts/lib/chart/gauge/GaugeSeries.js", "../../echarts/lib/chart/gauge/install.js", "../../echarts/lib/chart/funnel/FunnelView.js", "../../echarts/lib/chart/funnel/FunnelSeries.js", "../../echarts/lib/chart/funnel/funnelLayout.js", "../../echarts/lib/chart/funnel/install.js", "../../echarts/lib/chart/parallel/ParallelView.js", "../../echarts/lib/chart/parallel/ParallelSeries.js", "../../echarts/lib/chart/parallel/parallelVisual.js", "../../echarts/lib/chart/parallel/install.js", "../../echarts/lib/chart/sankey/SankeyView.js", "../../echarts/lib/chart/sankey/SankeySeries.js", "../../echarts/lib/chart/sankey/sankeyLayout.js", "../../echarts/lib/chart/sankey/sankeyVisual.js", "../../echarts/lib/chart/sankey/install.js", "../../echarts/lib/chart/helper/whiskerBoxCommon.js", "../../echarts/lib/chart/boxplot/BoxplotSeries.js", "../../echarts/lib/chart/boxplot/BoxplotView.js", "../../echarts/lib/chart/boxplot/boxplotLayout.js", "../../echarts/lib/chart/boxplot/prepareBoxplotData.js", "../../echarts/lib/chart/boxplot/boxplotTransform.js", "../../echarts/lib/chart/boxplot/install.js", "../../echarts/lib/chart/candlestick/CandlestickView.js", "../../echarts/lib/chart/candlestick/CandlestickSeries.js", "../../echarts/lib/chart/candlestick/preprocessor.js", "../../echarts/lib/chart/candlestick/candlestickVisual.js", "../../echarts/lib/chart/candlestick/candlestickLayout.js", "../../echarts/lib/chart/candlestick/install.js", "../../echarts/lib/chart/helper/EffectSymbol.js", "../../echarts/lib/chart/effectScatter/EffectScatterView.js", "../../echarts/lib/chart/effectScatter/EffectScatterSeries.js", "../../echarts/lib/chart/effectScatter/install.js", "../../echarts/lib/chart/helper/EffectLine.js", "../../echarts/lib/chart/helper/Polyline.js", "../../echarts/lib/chart/helper/EffectPolyline.js", "../../echarts/lib/chart/helper/LargeLineDraw.js", "../../echarts/lib/chart/lines/linesLayout.js", "../../echarts/lib/chart/lines/LinesView.js", "../../echarts/lib/chart/lines/LinesSeries.js", "../../echarts/lib/chart/lines/linesVisual.js", "../../echarts/lib/chart/lines/install.js", "../../echarts/lib/chart/heatmap/HeatmapLayer.js", "../../echarts/lib/chart/heatmap/HeatmapView.js", "../../echarts/lib/chart/heatmap/HeatmapSeries.js", "../../echarts/lib/chart/heatmap/install.js", "../../echarts/lib/chart/bar/PictorialBarView.js", "../../echarts/lib/chart/bar/PictorialBarSeries.js", "../../echarts/lib/chart/bar/installPictorialBar.js", "../../echarts/lib/chart/themeRiver/ThemeRiverView.js", "../../echarts/lib/chart/themeRiver/ThemeRiverSeries.js", "../../echarts/lib/chart/themeRiver/themeRiverLayout.js", "../../echarts/lib/chart/themeRiver/install.js", "../../echarts/lib/chart/sunburst/SunburstPiece.js", "../../echarts/lib/chart/sunburst/sunburstAction.js", "../../echarts/lib/chart/sunburst/SunburstView.js", "../../echarts/lib/chart/sunburst/SunburstSeries.js", "../../echarts/lib/chart/sunburst/sunburstLayout.js", "../../echarts/lib/chart/sunburst/sunburstVisual.js", "../../echarts/lib/chart/sunburst/install.js", "../../echarts/lib/chart/custom/CustomSeries.js", "../../echarts/lib/coord/cartesian/prepareCustom.js", "../../echarts/lib/coord/geo/prepareCustom.js", "../../echarts/lib/coord/single/prepareCustom.js", "../../echarts/lib/coord/polar/prepareCustom.js", "../../echarts/lib/coord/calendar/prepareCustom.js", "../../echarts/lib/chart/custom/CustomView.js", "../../echarts/lib/chart/custom/install.js"],
  "sourcesContent": ["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\n\nvar LineSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LineSeriesModel, _super);\n\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return group;\n  };\n\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\n\nexport default LineSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { isNumber, map } from 'zrender/lib/core/util.js';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (isDimensionStacked(data, dims[0]\n  /* , dims[1] */\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n\n  if (isDimensionStacked(data, dims[1]\n  /* , dims[0] */\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // If origin is specified as a number, use it as\n  // valueStart directly\n  else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n      valueStart = valueOrigin;\n    } // auto\n    else {\n        // Both positive\n        if (extent[0] > 0) {\n          valueStart = extent[0];\n        } // Both negative\n        else if (extent[1] < 0) {\n            valueStart = extent[1];\n          } // If is one positive, and one negative, onZero shall be true\n\n      }\n\n  return valueStart;\n}\n\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createFloat32Array } from '../../util/vendor.js';\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n\n      case '-':\n        pointAdded = false;\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // Poly path support NaN point\n\nimport Path from 'zrender/lib/graphic/Path.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY; // Ignore tiny segment.\n\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\n\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n\n        var tmpK = k + 1;\n\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0; // Is last point\n\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            var dir_1 = vx > 0 ? 1 : -1;\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            var dir_2 = vy > 0 ? 1 : -1;\n            cpx1 = x;\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\n\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n\n  return k;\n}\n\nvar ECPolylineShape =\n/** @class */\nfunction () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n\n  return ECPolylineShape;\n}();\n\nvar ECPolyline =\n/** @class */\nfunction (_super) {\n  __extends(ECPolyline, _super);\n\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n\n          x0 = x;\n          y0 = y;\n          break;\n\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n\n  return ECPolyline;\n}(Path);\n\nexport { ECPolyline };\n\nvar ECPolygonShape =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygonShape, _super);\n\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ECPolygonShape;\n}(ECPolylineShape);\n\nvar ECPolygon =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygon, _super);\n\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n\n  return ECPolygon;\n}(Path);\n\nexport { ECPolygon };", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // FIXME step not support polar\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport lineAnimationDiff from './lineAnimationDiff.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as modelUtil from '../../util/model.js';\nimport { ECPolyline, ECPolygon } from './poly.js';\nimport ChartView from '../../view/Chart.js';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nimport { convertToColorString } from '../../util/format.js';\nimport { lerp } from 'zrender/lib/tool/color.js';\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [[minX, minY], [maxX, maxY]];\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n      min1 = _a[0],\n      max1 = _a[1];\n\n  var _b = bboxFromPoints(points2),\n      min2 = _b[0],\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt, connectNulls) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n  var filteredPoints = [];\n\n  if (connectNulls) {\n    for (i = 0; i < points.length; i += 2) {\n      if (!isNaN(points[i]) && !isNaN(points[i + 1])) {\n        filteredPoints.push(points[i], points[i + 1]);\n      }\n    }\n\n    points = filteredPoints;\n  }\n\n  for (i = 0; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  } // Last points\n\n\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\n * Clip color stops to edge. Avoid creating too large gradients.\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\n *\n * The stops has been sorted from small to large.\n */\n\n\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\n\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      } // All following stop will be out of range. So just ignore them.\n\n\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\n\n        prevOutOfRangeColorStop = null;\n      }\n\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n\n  return newColorStops;\n}\n\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In most cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n\n  return len - 1;\n}\n\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\n\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n\n    prevIndex = i;\n    a = b;\n  }\n\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\n\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    } // Set to the final frame. To make sure label layout is right.\n\n\n    if (during) {\n      during(1, clipPath);\n    }\n\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\n\nvar LineView =\n/** @class */\nfunction (_super) {\n  __extends(LineView, _super);\n\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  };\n\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = !ecModel.ssr && seriesModel.isAnimationEnabled();\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var connectNulls = seriesModel.get('connectNulls');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n        }\n      }\n\n      polyline = this._newPolyline(points);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // If areaStyle is removed\n      else if (polygon) {\n          lineGroup.remove(polygon);\n          polygon = this._polygon = null;\n        } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      } // Update clipPath\n\n\n      var oldClipPath = lineGroup.getClipPath();\n\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      } // Always update, or it is wrong in the case turning on legend\n      // because points are not changed.\n\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      }); // In the case data zoom triggered refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing.\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n            }\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    } // Needs seriesIndex for focus\n\n\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n    }\n\n    var changePolyState = function (toState) {\n      _this._changePolyState(toState);\n    };\n\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('emphasis');\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        } // fix #11360: shouldn't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n\n        var zlevel = seriesModel.get('zlevel') || 0;\n        var z = seriesModel.get('z') || 0;\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('normal');\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  };\n\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  };\n\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n\n    if (zrUtil.isFunction(seriesDuration)) {\n      seriesDuration = seriesDuration(null);\n    }\n\n    var seriesDelay = seriesModel.get('animationDelay') || 0;\n    var seriesDelayValue = zrUtil.isFunction(seriesDelay) ? seriesDelay(null) : seriesDelay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n\n        var delay = zrUtil.isFunction(seriesDelay) ? seriesDelay(idx) : seriesDuration * ratio + seriesDelayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline; // series may be filtered.\n\n      var points = data_2.getLayout('points');\n\n      if (!points) {\n        polyline.removeTextContent();\n        this._endLabel = null;\n        return;\n      }\n\n      var endLabel = this._endLabel;\n\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      } // Find last non-NaN data to display data\n\n\n      var dataIndex = getLastIndexNotNull(points);\n\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n\n      this._endLabel = null;\n    }\n  };\n\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n\n      if (valueAnimation) {\n        labelInner(endLabel).setLabelText(value);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n\n\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step, connectNulls);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step, connectNulls);\n      next = turnPointsIntoStep(diff.next, coordSys, step, connectNulls);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step, connectNulls);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    }\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    }; // Also animate the original points.\n    // If points reference is changed when turning into step line.\n\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    } // Stop previous animation.\n\n\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel); // If use attr directly in updateProps.\n\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\n\nexport default LineView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries.js';\nimport LineView from './LineView.js'; // In case developer forget to include grid component\n\nimport layoutPoints from '../../layout/points.js';\nimport dataSample from '../../processor/dataSample.js';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData(); // Visual coding for legend\n\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  }); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { each } from 'zrender/lib/core/util.js';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var clampData_1 = coordSys.clampData(value);\n      var pt_1 = coordSys.dataToPoint(clampData_1);\n\n      if (startingAtTick) {\n        each(coordSys.getAxes(), function (axis, idx) {\n          // If axis type is category, use tick coords instead\n          if (axis.type === 'category' && dims != null) {\n            var tickCoords = axis.getTicksCoords();\n            var targetTickId = clampData_1[idx]; // The index of rightmost tick of markArea is 1 larger than x1/y1 index\n\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\n\n            if (isEnd) {\n              targetTickId += 1;\n            } // The only contains one tick, tickCoords is\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\n            // to the length should always be larger than 1\n\n\n            if (tickCoords.length < 2) {\n              return;\n            } else if (tickCoords.length === 2) {\n              // The left value and right value of the axis are\n              // the same. coord is 0 in both items. Use the max\n              // value of the axis as the coord\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\n              return;\n            }\n\n            var leftCoord = void 0;\n            var coord = void 0;\n            var stepTickValue = 1;\n\n            for (var i = 0; i < tickCoords.length; i++) {\n              var tickCoord = tickCoords[i].coord; // The last item of tickCoords doesn't contain\n              // tickValue\n\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\n\n              if (tickValue === targetTickId) {\n                coord = tickCoord;\n                break;\n              } else if (tickValue < targetTickId) {\n                leftCoord = tickCoord;\n              } else if (leftCoord != null && tickValue > targetTickId) {\n                coord = (tickCoord + leftCoord) / 2;\n                break;\n              }\n\n              if (i === 1) {\n                // Here we assume the step of category axes is\n                // the same\n                stepTickValue = tickValue - tickCoords[0].tickValue;\n              }\n            }\n\n            if (coord == null) {\n              if (!leftCoord) {\n                // targetTickId is smaller than all tick ids in the\n                // visible area, use the leftmost tick coord\n                coord = tickCoords[0].coord;\n              } else if (leftCoord) {\n                // targetTickId is larger than all tick ids in the\n                // visible area, use the rightmost tick coord\n                coord = tickCoords[tickCoords.length - 1].coord;\n              }\n            }\n\n            pt_1[idx] = axis.toGlobalCoord(coord);\n          }\n        });\n      } else {\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt_1[offsetIndex] += offset + size / 2;\n      }\n\n      return pt_1;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\n\nvar SausageShape =\n/** @class */\nfunction () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n\n  return SausageShape;\n}();\n\nvar SausagePath =\n/** @class */\nfunction (_super) {\n  __extends(SausagePath, _super);\n\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'sausage';\n    return _this;\n  }\n\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    } // ctx.closePath();\n\n  };\n\n  return SausagePath;\n}(Path);\n\nexport default SausagePath;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin; // base position: top-left\n\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\n\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\n\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = []; // Do not support progressive in normal mode.\n\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      } else {\n        bgEl.setShape('cornerRadius', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          } else {\n            bgEl.setShape('cornerRadius', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      } // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n          updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n        }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape && // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Because if data changed and the bar shows again, its transition animation\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n    el.setShape('r', borderRadius);\n  } else if (!seriesModel.get('roundCap')) {\n    var sectorShape = el.shape;\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    extend(sectorShape, cornerRadius);\n    el.setShape(sectorShape);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n\n  progressiveEls && progressiveEls.push(el);\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Do layout after other overall layout, which can prepare some information.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api); // center can be string or number when coordinateSystem is specified\n\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  var cx;\n  var cy;\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys) {\n    // percentage is not allowed when coordinate system is specified\n    var point = coordSys.dataToPoint(center);\n    cx = point[0] || 0;\n    cy = point[1] || 0;\n  } else {\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    cx = parsePercent(center[0], width) + viewRect.x;\n    cy = parsePercent(center[1], height) + viewRect.y;\n  }\n\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n\n    var _a = getBasicPieLayout(seriesModel, api),\n        cx = _a.cx,\n        cy = _a.cy,\n        r = _a.r,\n        r0 = _a.r0;\n\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number.js';\nimport { Point } from '../../util/graphic.js';\nimport { each, isNumber } from 'zrender/lib/core/util.js';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      var newX = cx + (dx + item.len2) * dir;\n      var deltaX = newX - item.label.x;\n      var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\n\n      constrainTextWidth(item, newTargetWidth, true);\n      item.label.x = newX;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy >= semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      if (layout.labelStyleWidth != null) {\n        continue;\n      }\n\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var targetTextWidth = void 0;\n\n      if (layout.labelAlignTo === 'edge') {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else if (layout.labelAlignTo === 'labelLine') {\n        if (label.x < cx) {\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      layout.targetTextWidth = targetTextWidth;\n      constrainTextWidth(layout, targetTextWidth);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var padding = label.style.padding;\n      var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\n\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n      var realTextWidth = layout.rect.width + extraPaddingH;\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n/**\n * Set max width of each label, and then wrap each label to the max width.\n *\n * @param layout label layout\n * @param availableWidth max width for the label to display\n * @param forceRecalculate recaculate the text layout even if the current width\n * is smaller than `availableWidth`. This is useful when the text was previously\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\n * which case, previous wrapping should be redo.\n */\n\n\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\n  if (forceRecalculate === void 0) {\n    forceRecalculate = false;\n  }\n\n  if (layout.labelStyleWidth != null) {\n    // User-defined style.width has the highest priority.\n    return;\n  }\n\n  var label = layout.label;\n  var style = label.style;\n  var textRect = layout.rect;\n  var bgColor = style.backgroundColor;\n  var padding = style.padding;\n  var paddingH = padding ? padding[1] + padding[3] : 0;\n  var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\n\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\n    var oldHeight = textRect.height;\n\n    if (overflow && overflow.match('break')) {\n      // Temporarily set background to be null to calculate\n      // the bounding box without background.\n      label.setStyle('backgroundColor', null); // Set constraining width\n\n      label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding.\n\n      var innerRect = label.getBoundingRect();\n      label.setStyle('width', Math.ceil(innerRect.width));\n      label.setStyle('backgroundColor', bgColor);\n    } else {\n      var availableInnerWidth = availableWidth - paddingH;\n      var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\n      ? availableInnerWidth : // Current available width is enough, but the text may have\n      // already been wrapped with a smaller available width.\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\n      // so don't constrain width (otherwise it may have\n      // empty space in the background).\n      ? null // Current available is smaller than text width, so\n      // use the current available width as constraining\n      // width.\n      : availableInnerWidth : // Current available width is enough, so no need to\n      // constrain.\n      null;\n      label.setStyle('width', newWidth);\n    }\n\n    var newRect = label.getBoundingRect();\n    textRect.width = newRect.width;\n    var margin = (label.style.margin || 0) + 2.1;\n    textRect.height = newRect.height + margin;\n    textRect.y -= (textRect.height - oldHeight) / 2;\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n\n      if (labelLine) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      }\n\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var PI = Math.PI;\n    var labelRotate = 0;\n    var rotate = labelModel.get('rotate');\n\n    if (isNumber(rotate)) {\n      labelRotate = rotate * (PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else if (rotate === 'radial' || rotate === true) {\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n      labelRotate = radialAngle;\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n      var rad = Math.atan2(nx, ny);\n\n      if (rad < 0) {\n        rad = PI * 2 + rad;\n      }\n\n      var isDown = ny > 0;\n\n      if (isDown) {\n        rad = PI + rad;\n      }\n\n      labelRotate = rad - PI;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect,\n        unconstrainedWidth: textRect.width,\n        labelStyleWidth: label.style.width\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport labelLayout from './labelLayout.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBasicPieLayout } from './pieLayout.js';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (seriesModel.ecModel.ssr) {\n        // Use scale animation in SSR mode(opacity?)\n        // Because CSS SVG animation doesn't support very customized shape animation.\n        graphic.initProps(sector, {\n          scaleX: 0,\n          scaleY: 0\n        }, seriesModel, {\n          dataIndex: idx,\n          isFrom: true\n        });\n        sector.originX = sectorShape.cx;\n        sector.originY = sectorShape.cy;\n      } else if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n          if (startAngle != null) {\n            sector.setShape({\n              startAngle: startAngle,\n              endAngle: startAngle\n            });\n            graphic.initProps(sector, {\n              shape: {\n                startAngle: layout.startAngle,\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          } else {\n            sector.shape.endAngle = layout.startAngle;\n            graphic.updateProps(sector, {\n              shape: {\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          }\n        }\n    } else {\n      saveOldStyle(sector); // Transition animation from the old shape\n\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = extend({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    } // remove empty-circle if it exists\n\n\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    } // when all data are filtered, show lightgray empty circle\n\n\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var sector = new graphic.Sector({\n        shape: getBasicPieLayout(seriesModel, api)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { extend, isArray } from 'zrender/lib/core/util.js';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { getPercentSeats } from '../../util/number.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar innerData = modelUtil.makeInner();\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData(); // update seats when data is changed\n\n    var dataInner = innerData(data);\n    var seats = dataInner.seats;\n\n    if (!seats) {\n      var valueList_1 = [];\n      data.each(data.mapDimension('value'), function (value) {\n        valueList_1.push(value);\n      });\n      seats = dataInner.seats = getPercentSeats(valueList_1, data.hostModel.get('percentPrecision'));\n    }\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // seats may be empty when sum is 0\n\n\n    params.percent = seats[dataIndex] || 0;\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同 tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见 textStyle\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport pieLayout from '../pie/pieLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport PieView from './PieView.js';\nimport PieSeriesModel from './PieSeries.js';\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n\n    this.hoverDataIdx = -1;\n    return false;\n  };\n\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n\n    return rect;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n\n    var symbolEl = this._create();\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, opt);\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points); // Reset draw cursor.\n\n      child.reset();\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points; // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length); // Concat two array\n\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen); // Update endIndex\n\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n\n      var symbolEl = this._create();\n\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n\n    this._newAdded.push(symbolEl);\n\n    return symbolEl;\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    var ecData = getECData(symbolEl); // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarLayout(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    }); // Close polygon\n\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys); // Copy the first actual point to the end of the array\n\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\n\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\n\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n// Backward compat for radar chart in 2\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarBackwardCompat(option) {\n  var polarOptArr = option.polar;\n\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n\n    var polarNotRadar_1 = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n\n        option.radar = option.radar || [];\n\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar_1.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar_1;\n  }\n\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\n\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\n\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      toggleHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    this._data = data;\n  };\n\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\n\nexport default RadarView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup.js';\n\nvar RadarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(RadarSeriesModel, _super);\n\n  function RadarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  } // Overwrite\n\n\n  RadarSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  };\n\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    var nameToDisplay = name === '' ? this.name : name;\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\n    return createTooltipMarkup('section', {\n      header: nameToDisplay,\n      sortBlocks: true,\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\n        return createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: markerColor,\n          name: axis.name,\n          value: val,\n          sortParam: val\n        });\n      })\n    });\n  };\n\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\n    if (dataIndex != null) {\n      var data_1 = this.getData();\n      var coordSys = this.coordinateSystem;\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data_1.mapDimension(dim);\n      }), dataIndex);\n\n      for (var i = 0, len = values.length; i < len; i++) {\n        if (!isNaN(values[i])) {\n          var indicatorAxes = coordSys.getIndicatorAxes();\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\n        }\n      }\n    }\n  };\n\n  RadarSeriesModel.type = 'series.radar';\n  RadarSeriesModel.dependencies = ['radar'];\n  RadarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid',\n      join: 'round'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbolSize: 8 // symbolRotate: null\n\n  };\n  return RadarSeriesModel;\n}(SeriesModel);\n\nexport default RadarSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport radarLayout from '../radar/radarLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport backwardCompat from '../radar/backwardCompat.js';\nimport RadarView from './RadarView.js';\nimport RadarSeriesModel from './RadarSeries.js';\nimport { install as installRadarComponent } from '../../component/radar/install.js';\nexport function install(registers) {\n  use(installRadarComponent);\n  registers.registerChartView(RadarView);\n  registers.registerSeriesModel(RadarSeriesModel);\n  registers.registerLayout(radarLayout);\n  registers.registerProcessor(dataFilter('radar'));\n  registers.registerPreprocessor(backwardCompat);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport MapDraw from '../../component/helper/MapDraw.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states.js';\n\nvar MapView =\n/** @class */\nfunction (_super) {\n  __extends(MapView, _super);\n\n  function MapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapView.type;\n    return _this;\n  }\n\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    }\n\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\n      this._mapDraw.resetForLabelLayout();\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawn map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  };\n\n  MapView.prototype.remove = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  };\n\n  MapView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  };\n\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          // TODO\n          fill: mapModel.getData().getVisual('style').fill\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name_1 = originalData.getName(originalDataIndex);\n        var fullIndex_1 = fullData.indexOfName(name_1);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the beginning, and this scenario is rarely encountered.\n        // So it won't be fixed until we have to.\n\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\n          labelFetcher: {\n            getFormattedLabel: function (idx, state) {\n              return mapModel.getFormattedLabel(fullIndex_1, state);\n            }\n          },\n          defaultText: name_1\n        });\n        circle.disableLabelAnimation = true;\n\n        if (!labelModel.get('position')) {\n          circle.setTextConfig({\n            position: 'bottom'\n          });\n        }\n\n        regionGroup.onHoverStateChange = function (toState) {\n          setStatesFlag(circle, toState);\n        };\n      }\n\n      group.add(circle);\n    });\n  };\n\n  MapView.type = 'map';\n  return MapView;\n}(ChartView);\n\nexport default MapView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { createSymbol } from '../../util/symbol.js';\n\nvar MapSeries =\n/** @class */\nfunction (_super) {\n  __extends(MapSeries, _super);\n\n  function MapSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapSeries.type; // Only first map series of same mapType will drawMap.\n\n    _this.needsDrawMap = false; // Group of all map series with same mapType\n\n    _this.seriesGroup = [];\n\n    _this.getTooltipPosition = function (dataIndex) {\n      if (dataIndex != null) {\n        var name_1 = this.getData().getName(dataIndex);\n        var geo = this.coordinateSystem;\n        var region = geo.getRegion(name_1);\n        return region && geo.dataToPoint(region.getCenter());\n      }\n    };\n\n    return _this;\n  }\n\n  MapSeries.prototype.getInitialData = function (option) {\n    var data = createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var dataNameMap = zrUtil.createHashMap();\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name_2 = data.getName(i);\n      dataNameMap.set(name_2, true);\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        toAppendNames.push(name);\n      }\n    }); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  };\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n\n\n  MapSeries.prototype.getHostGeoModel = function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\n  };\n\n  MapSeries.prototype.getMapType = function () {\n    return (this.getHostGeoModel() || this).option.map;\n  }; // _fillOption(option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // }\n\n\n  MapSeries.prototype.getRawValue = function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  };\n  /**\n   * Get model of region\n   */\n\n\n  MapSeries.prototype.getRegionModel = function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  };\n  /**\n   * Map tooltip formatter\n   */\n\n\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(seriesGroup[i].name);\n      }\n    }\n\n    return createTooltipMarkup('section', {\n      header: seriesNames.join(', '),\n      noHeader: !seriesNames.length,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: name,\n        value: value\n      })]\n    });\n  };\n\n  MapSeries.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  MapSeries.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  MapSeries.prototype.getLegendIcon = function (opt) {\n    var iconType = opt.icon || 'roundRect';\n    var icon = createSymbol(iconType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n    icon.setStyle(opt.itemStyle); // Map do not use itemStyle.borderWidth as border width\n\n    icon.style.stroke = 'none'; // No rotation because no series visual symbol for map\n\n    if (iconType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n\n    return icon;\n  };\n\n  MapSeries.type = 'series.map';\n  MapSeries.dependencies = ['geo'];\n  MapSeries.layoutMode = 'box';\n  MapSeries.defaultOption = {\n    // 一级层叠\n    // zlevel: 0,\n    // 二级层叠\n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    // Layout with center and size\n    // If you want to put map in a fixed size box with right aspect ratio\n    // This two properties may be more convenient.\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    showLegendSymbol: true,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    selectedMode: true,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    nameProperty: 'name'\n  };\n  return MapSeries;\n}(SeriesModel);\n\nexport default MapSeries;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function mapSymbolLayout(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.getCenter());\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendIcon (which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport MapView from './MapView.js';\nimport MapSeries from './MapSeries.js';\nimport mapDataStatistic from './mapDataStatistic.js';\nimport mapSymbolLayout from './mapSymbolLayout.js';\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport { install as installGeo } from '../../component/geo/install.js';\nexport function install(registers) {\n  use(installGeo);\n  registers.registerChartView(MapView);\n  registers.registerSeriesModel(MapSeries);\n  registers.registerLayout(mapSymbolLayout);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\n  createLegacyDataSelectAction('map', registers.registerAction);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embedded for some of the code in this file:\n* The tree layoutHelper implementation was originally copied from\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\n* some modifications made for this project.\n* (see more details in the comment of the specific method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n */\nimport * as layout from '../../util/layout.js';\n/**\n * Initialize all computational message for following algorithm.\n */\n\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n */\n\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes all real x-coordinates by summing up the modifiers recursively.\n */\n\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate.\n */\n\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\n * Get the layout position of the whole view.\n */\n\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n *\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLeft’s ancestor is a sibling of node, returns nodeInLeft’s ancestor.\n * Otherwise, returns the specified ancestor.\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Shifts the current subtree rooted at wr.\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport { radialCoordinate } from './layoutHelper.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport View from '../../coord/View.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport { parsePercent } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\n\nvar TreeEdgeShape =\n/** @class */\nfunction () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n\n  return TreeEdgeShape;\n}();\n\nvar TreePath =\n/** @class */\nfunction (_super) {\n  __extends(TreePath, _super);\n\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n\n  return TreePath;\n}(Path);\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n\n    this._updateViewCoordSys(seriesModel, api);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  };\n\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  };\n\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  } // Handle status\n\n\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge; // curve edge from node -> parent\n  // polyline edge from node -> children\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  } // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\n\n\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\n\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n\n  var _a = getSourceNode(virtualRoot, node),\n      source = _a.source,\n      sourceLayout = _a.sourceLayout;\n\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n\n  if (!symbolEl) {\n    return;\n  }\n\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\n\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout; // Use same duration and easing with update to have more consistent animation.\n\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, data.hostModel, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  }); // remove edge as parent node\n\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  }); // remove edge as child node\n\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\n\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nexport default TreeView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\n\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkSeriesData;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Tree data structure\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport linkSeriesData from './helper/linkSeriesData.js';\nimport SeriesData from './SeriesData.js';\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\nimport { convertOptionIdName } from '../util/model.js';\n\nvar TreeNode =\n/** @class */\nfunction () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\n     * Reference to list item.\n     * Do not persistent dataIndex outside,\n     * besause it may be changed by list.\n     * If dataIndex -1,\n     * this node is logical deleted (filtered) in list.\n     */\n\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\n   * The node is removed.\n   */\n\n\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (zrUtil.isFunction(options)) {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\n   * Update depth and height of this subtree.\n   */\n\n\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  };\n\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\n   * @param includeSelf Default false.\n   * @return order: [root, child, grandchild, ...]\n   */\n\n\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  };\n\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n\n    indices.reverse();\n    return indices;\n  };\n\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\n   * @return {Object} layout\n   */\n\n\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  }; // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  }; // TODO: TYPE More specific model\n\n\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\n   * Get item visual\n   * FIXME: make return type better\n   */\n\n\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\n   * index in parent's children\n   */\n\n\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    return -1;\n  };\n  /**\n   * if this is an ancestor of another node\n   *\n   * @param node another node\n   * @return if is ancestor\n   */\n\n\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  };\n  /**\n   * if this is an descendant of another node\n   *\n   * @param node another node\n   * @return if is descendant\n   */\n\n\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n\n  return TreeNode;\n}();\n\nexport { TreeNode };\n;\n\nvar Tree =\n/** @class */\nfunction () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n\n\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\n   * Clear all layouts\n   */\n\n\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\n   * data node format:\n   * {\n   *     name: ...\n   *     value: ...\n   *     children: [\n   *         {\n   *             name: ...\n   *             value: ...\n   *             children: ...\n   *         },\n   *         ...\n   *     ]\n   * }\n   */\n\n\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n\n      tree._nodes.push(node);\n\n      var children = dataNode.children;\n\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n\n  return Tree;\n}();\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nexport default Tree;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\nexport function getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\n\nvar TreeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreeSeriesModel, _super);\n\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hasSymbolVisual = true; // Do it self.\n\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\n   * Init a tree data structure from data in option series\n   */\n\n\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    // create a virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n\n\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  };\n\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  }; // Add tree path to tooltip param\n\n\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    params.collapsed = !node.isExpand;\n    return params;\n  };\n\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\n\nexport default TreeSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Traverse the tree from bottom to top and do something\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexport { eachAfter, eachBefore };", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { eachAfter, eachBefore } from './traversalHelper.js';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper.js';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel(); // TODO Optimize\n\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport TreeView from './TreeView.js';\nimport TreeSeriesModel from './TreeSeries.js';\nimport treeLayout from './treeLayout.js';\nimport treeVisual from './treeVisual.js';\nimport { installTreeAction } from './treeAction.js';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as helper from '../helper/treeHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\n\nvar TreemapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || []; // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null; // If no levelModel, we also need `designatedVisualModel`.\n\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\n   * @override\n   * @param {number} dataIndex\n   * @param {boolean} [mutipleSeries=false]\n   */\n\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\n   * Add tree path to tooltip param\n   *\n   * @override\n   * @param {number} dataIndex\n   * @return {Object}\n   */\n\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this); // compatitable the previous code.\n\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\n   * @public\n   * @param {Object} layoutInfo {\n   *                                x: containerGroup x\n   *                                y: containerGroup y\n   *                                width: containerGroup width\n   *                                height: containerGroup height\n   *                            }\n   */\n\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\n     * @readOnly\n     * @type {Object}\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\n   * @param  {string} id\n   * @return {number} index\n   */\n\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n\n    /**\n     * @private\n     * @type {Object}\n     */\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\n       * @private\n       * @type {number}\n       */\n\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '▶',\n    // to align specialized icon. ▷▶❒❐▼✚\n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\n\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate' // align\n      // verticalAlign\n\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        overflow: 'truncate',\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\n * @param {Object} dataNode\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\n * set default to level configuration\n */\n\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nexport default TreemapSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport * as layout from '../../util/layout.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { curry, defaults } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName } from '../../util/model.js';\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\n\nvar Breadcrumb =\n/** @class */\nfunction () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n\n    var normalStyleModel = model.getModel('itemStyle');\n    var emphasisModel = model.getModel('emphasis');\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n\n    this._prepare(targetNode, layoutParam, textStyleModel);\n\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\n\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\n   * Prepare render list and total width\n   * @private\n   */\n\n\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text; // Hdie text and shorten width if necessary.\n\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            text: text\n          })\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\n        text: text\n      });\n      el.ensureState('emphasis').style = emphasisItemStyle;\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  return Breadcrumb;\n}();\n\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n} // Package custom mouse event.\n\n\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\n\nexport default Breadcrumb;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Animate multiple elements with a single done-callback.\n *\n * @example\n *  animation\n *      .createWrap()\n *      .add(el1, {x: 10, y: 10})\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\n *      .done(function () { // done })\n *      .start('cubicOut');\n */\nvar AnimationWrap =\n/** @class */\nfunction () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\n   * Caution: a el can only be added once, otherwise 'done'\n   * might not be called. This method checks this (by el.id),\n   * suppresses adding and returns false when existing el found.\n   *\n   * @return Whether adding succeeded.\n   */\n\n\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n\n    this._elExistsMap[el.id] = true;\n\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n\n    return true;\n  };\n  /**\n   * Only execute when animation done/aborted.\n   */\n\n\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\n   * Will stop exist animation firstly.\n   */\n\n\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n\n    var count = this._storage.length;\n\n    var checkTerminate = function () {\n      count--;\n\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n\n    return this;\n  };\n\n  return AnimationWrap;\n}();\n\nexport function createWrap() {\n  return new AnimationWrap();\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as helper from '../helper/treeHelper.js';\nimport Breadcrumb from './Breadcrumb.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as animationUtil from '../../util/animation.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport ChartView from '../../view/Chart.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\nimport { windowOpen } from '../../util/format.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel'; // Should larger than emphasis states lift z\n\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\n\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar inner = makeInner();\n\nvar TreemapView =\n/** @class */\nfunction (_super) {\n  __extends(TreemapView, _super);\n\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var hasAnimation = seriesModel.get('animation');\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // 加一层containerGroup是为了clip，但是现在clip功能并没有实现。\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    } // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we cannot find all of the old graphic\n    // elements from tree. So we use this strategy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n        }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  };\n\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing'); // TODO: do not support function until necessary.\n\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n        var innerStore = inner(parent);\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          } // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        } // TODO: do not support delay until necessary.\n\n\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n              target.style = {\n                opacity: 1\n              };\n            }\n        }\n\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      } // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n\n\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, don't use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\n * @inner\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel(); // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0; // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  } // Background\n\n\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var emphasisModel = nodeModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var isDisabled = emphasisModel.get('disabled');\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus; // No children, render content.\n\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n\n    if (bg) {\n      setAsHighDownDispatcher(bg, !isDisabled); // Only for enabling highlight/downplay.\n\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n\n    setAsHighDownDispatcher(group, !isDisabled); // Only for enabling highlight/downplay.\n\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText( // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n          bg.removeTextContent();\n        }\n\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    var ecData = getECData(content); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel); // PENDING: convert ZRColor to ColorString for text.\n\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n\n    group.add(content);\n  }\n\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n\n  function prepareText(rectEl, visualColor, visualOpacity, // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n\n    if (!textEl) {\n      return;\n    }\n\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n        element = new Ctor();\n\n        if (element instanceof Displayable) {\n          element.z2 = calculateZ2(depth, z);\n        }\n\n        prepareAnimationWhenNoOld(lasts, element);\n      } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = !isGroup;\n  }\n} // We cannot set all background with the same z, because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause lower background elements to overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\n\nexport default TreemapView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\nimport { makeInner } from '../../util/model.js';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n\n    if (root.isRemoved()) {\n      return;\n    }\n\n    travelTree(root, // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\n\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data; // Optimize\n\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style'); // calculate border color\n\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals); // Apply visual to this node.\n\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\n\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\n\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\n\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n\n    return color;\n  }\n}\n\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\n\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\n\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n\n  if (!rangeVisual) {\n    return;\n  }\n\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n} // Notice: If we don't have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node doesn't have children, and its siblings have children,\n// and colorRange is set on level-1, then the node cannot be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\n\n\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exists on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\n\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n\n  return childVisuals;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embedded for some of the code in this file:\n* The treemap layout implementation was originally copied from\n* \"d3.js\" with some modifications made for this project.\n* (See more details in the comment of the method \"squarify\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from '../helper/treeHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\n * @public\n */\n\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\n\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      }; // layout should be cleared because using updateView but not update.\n\n      viewRoot.hostTree.clearLayouts(); // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0); // Supplement layout.\n\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\n    // 现在没有clip功能，暂时取ec高宽。\n\n    prunning(treeRoot, // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\n * Layout treemap with squarify algorithm.\n * The original presentation of this algorithm\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\n * The implementation of this algorithm was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * @protected\n * @param {module:echarts/data/Tree~TreeNode} node\n * @param {Object} options\n * @param {string} options.sort 'asc' or 'desc'\n * @param {number} options.squareRatio\n * @param {boolean} hideChildren\n * @param {number} depth\n */\n\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n\n  if (node.isRemoved()) {\n    return;\n  }\n\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height; // Considering border and gap\n\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n\n  if (!viewChildren.length) {\n    return;\n  }\n\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n\n  var row = [];\n  row.area = 0;\n\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\n\n    if (score <= best) {\n      i++;\n      best = score;\n    } // abort, and try a different orientation\n    else {\n        row.area -= row.pop().getLayout().area;\n        position(row, rowFixedLength, rect, halfGapWidth, false);\n        rowFixedLength = mathMin(rect.width, rect.height);\n        row.length = row.area = 0;\n        best = Infinity;\n      }\n  }\n\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\n * Set area to each child, and calculate data extent for visual coding.\n */\n\n\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\n\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  } // Sort children, order by desc.\n\n\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  } // Set area to each child.\n\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\n\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\n */\n\n\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len; // Always travel from little value to big value.\n\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\n * Sort\n */\n\n\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n\n  return viewChildren;\n}\n/**\n * Statistic\n */\n\n\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  } // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n\n\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent; // The same as area dimension.\n\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  } // Other dimension.\n  else {\n      dataExtent = [Infinity, -Infinity];\n      each(children, function (child) {\n        var value = child.getValue(dimension);\n        value < dataExtent[0] && (dataExtent[0] = value);\n        value > dataExtent[1] && (dataExtent[1] = value);\n      });\n    }\n\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\n * Computes the score for the specified row,\n * as the worst aspect ratio.\n */\n\n\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\n * Positions the specified row of nodes. Modifies `rect`.\n */\n\n\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\n\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n} // Return [containerWidth, containerHeight] as default.\n\n\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whole width and height by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n\n    var currNodeValue = currNode.getValue();\n\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\n\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n} // Root position based on coord of containerGroup\n\n\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (!targetInfo) {\n    return defaultPosition;\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n\n\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n\n  if (!layout) {\n    return defaultPosition;\n  } // Transform coord from local to container.\n\n\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n} // Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\n\n\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true); // Transform to child coordinate.\n\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\n\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { installTreemapAction } from './treemapAction.js';\nimport TreemapSeriesModel from './TreemapSeries.js';\nimport TreemapView from './TreemapView.js';\nimport treemapVisual from './treemapVisual.js';\nimport treemapLayout from './treemapLayout.js';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\n\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\n\n\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\n\n\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\n\n\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\n\n\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\n\n\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\n\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n        tempX = _a[0],\n        tempY = _a[1];\n\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf; // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl(); // need to check if el exists. '-' value may not create node element.\n\n  if (!el) {\n    return;\n  }\n\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n\n    var isLeft = pos[0] < cx;\n\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embedded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n\n      if (!el) {\n        return;\n      } // Update draggable\n\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx); // Write position back to layout\n\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]); // mark node fixed\n\n              node.setLayout({\n                fixed: true\n              }, true); // recalculate circular layout\n\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]); // update edge\n\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (!el) {\n        return;\n      }\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\n   * Add a new node\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\n   * Get node by data index\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\n   * Get node by id\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\n   * Add a new edge\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PENDING\n\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\n   * Get edge by data index\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\n   * Iterate all nodes\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Iterate all edges\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\n\nvar PointerShape =\n/** @class */\nfunction () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n\n  return PointerShape;\n}();\n\nvar PointerPath =\n/** @class */\nfunction (_super) {\n  __extends(PointerPath, _super);\n\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'pointer';\n    return _this;\n  }\n\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n\n  return PointerPath;\n}(Path);\n\nexport default PointerPath;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\nimport ChartView from '../../view/Chart.js';\nimport { parsePercent, round, linearMap } from '../../util/number.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\nimport { setCommonECData } from '../../util/innerStore.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\n\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\n\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n\n  if (labelFormatter) {\n    if (isString(labelFormatter)) {\n      label = labelFormatter.replace('{value}', label);\n    } else if (isFunction(labelFormatter)) {\n      label = labelFormatter(value);\n    }\n  }\n\n  return label;\n}\n\nvar GaugeView =\n/** @class */\nfunction (_super) {\n  __extends(GaugeView, _super);\n\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeView.type;\n    return _this;\n  }\n\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n\n    this._data = seriesModel.getData();\n  };\n\n  GaugeView.prototype.dispose = function () {};\n\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angles = [startAngle, endAngle];\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0];\n    endAngle = angles[1];\n    var angleRangeSpan = endAngle - startAngle;\n    var prevEndAngle = startAngle;\n    var sectors = [];\n\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      sectors.push(sector);\n      prevEndAngle = endAngle;\n    }\n\n    sectors.reverse();\n    each(sectors, function (sector) {\n      return group.add(sector);\n    });\n\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n\n      var i;\n\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      } // More than 1\n\n\n      return colorList[i - 1][1];\n    };\n\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n\n    this._renderAnchor(seriesModel, posInfo);\n\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle); // Split line\n\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n\n        group.add(splitLine);\n      } // Label\n\n\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\n        var rotateType = labelModel.get('rotate');\n        var rotate = 0;\n\n        if (rotateType === 'radial') {\n          rotate = -angle + 2 * Math.PI;\n\n          if (rotate > Math.PI / 2) {\n            rotate += Math.PI;\n          }\n        } else if (rotateType === 'tangential') {\n          rotate = -angle - Math.PI / 2;\n        } else if (isNumber(rotateType)) {\n          rotate = rotateType * Math.PI / 180;\n        }\n\n        if (rotate === 0) {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true\n          }));\n        } else {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: 'middle',\n              align: 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true,\n            originX: textStyleX,\n            originY: textStyleY,\n            rotation: rotate\n          }));\n        }\n      } // Axis tick\n\n\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n\n          group.add(tickLine);\n          angle += subStep;\n        }\n\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer; // not exist icon type will be set 'rect'\n\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\n      return progress;\n    }\n\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        var val = data.get(valueDim, idx);\n\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle); // TODO hide pointer on NaN value?\n\n          graphic.initProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        var val = data.get(valueDim, newIdx);\n\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        var focus = emphasisModel.get('focus');\n        var blurScope = emphasisModel.get('blurScope');\n        var emphasisDisabled = emphasisModel.get('disabled');\n\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\n        }\n\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n\n      var itemDetailModel = itemModel.getModel('detail');\n\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\n\nexport default GaugeView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar GaugeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GaugeSeriesModel, _super);\n\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // 最小值\n    min: 0,\n    // 最大值\n    max: 100,\n    // 分割段数，默认为10\n    splitNumber: 10,\n    // 坐标轴线\n    axisLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // 坐标轴线\n    progress: {\n      // 默认显示，属性show控制显示与否\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // 分隔线\n    splitLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      // 属性length控制线长\n      length: 10,\n      distance: 10,\n      // 属性lineStyle（详见lineStyle）控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // 坐标轴小标记\n    axisTick: {\n      // 属性show控制显示与否，默认不显示\n      show: true,\n      // 每份split细分多少段\n      splitNumber: 5,\n      // 属性length控制线长\n      length: 6,\n      distance: 10,\n      // 属性lineStyle控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12,\n      rotate: 0\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, y，单位px\n      offsetCenter: [0, '20%'],\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, y，单位px\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\n\nexport default GaugeSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GaugeView from './GaugeView.js';\nimport GaugeSeriesModel from './GaugeSeries.js';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar FunnelPiece =\n/** @class */\nfunction (_super) {\n  __extends(FunnelPiece, _super);\n\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n\n    _this.setTextGuideLine(labelLine);\n\n    _this.updateData(data, idx, true);\n\n    return _this;\n  }\n\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    } // Update common style\n\n\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n\n    setStatesStylesFromModel(polygon, itemModel);\n\n    this._updateLabel(data, idx);\n\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle( // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    }; // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n\n  return FunnelPiece;\n}(graphic.Polygon);\n\nvar FunnelView =\n/** @class */\nfunction (_super) {\n  __extends(FunnelView, _super);\n\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  FunnelView.prototype.dispose = function () {};\n\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\n\nexport default FunnelView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar FunnelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSeriesModel, _super);\n\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\n\n    this._defaultLabelLine(option);\n  };\n\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  }; // Overwrite\n\n\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    // zlevel: 0,                  // 一级层叠\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // 默认取数据最小最大值\n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer' // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: 各异,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: 各异,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\n\nexport default FunnelSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView.js';\nimport FunnelSeriesModel from './FunnelSeries.js';\nimport funnelLayout from './funnelLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { numericToNumber } from '../../util/number.js';\nimport { eqNaN } from 'zrender/lib/core/util.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar DEFAULT_SMOOTH = 0.3;\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\n   * @override\n   */\n\n\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      saveOldStyle(line);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    } // First create\n\n\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n\n    this._data = data;\n  };\n\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n\n    this._dataGroup.removeAll();\n  };\n\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    var progressiveEls = this._progressiveEls = [];\n\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n      progressiveEls.push(line);\n    }\n  };\n\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\n\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n\n  return points;\n}\n\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\n\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\n\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n} // function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\n\n\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nexport default ParallelView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\n\nvar ParallelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelSeriesModel, _super);\n\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\n   * User can get data raw indices on 'axisAreaSelected' event received.\n   *\n   * @return Raw indices\n   */\n\n\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\n\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n\n  if (!parallelModel) {\n    return;\n  }\n\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\n\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\n\nexport default ParallelSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function (seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function (params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelSeriesModel from './ParallelSeries.js';\nimport parallelVisual from './parallelVisual.js';\nimport { install as installParallelComponent } from '../../component/parallel/install.js';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString } from 'zrender/lib/core/util.js';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          curve.style.decal = edge.node1.getVisual('style').decal;\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          curve.style.decal = edge.node2.getVisual('style').decal;\n          break;\n\n        case 'gradient':\n          var sourceColor = edge.node1.getVisual('color');\n          var targetColor = edge.node2.getVisual('color');\n\n          if (isString(sourceColor) && isString(targetColor)) {\n            curve.style.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n              color: sourceColor,\n              offset: 0\n            }, {\n              color: targetColor,\n              offset: 1\n            }]);\n          }\n\n      }\n\n      setLabelStyle(curve, getLabelStatesModels(edgeModel, 'edgeLabel'), {\n        labelFetcher: seriesModel,\n        labelDataIndex: edge.dataIndex,\n        defaultText: \"\" + edgeModel.get('value')\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        return model.getItemStyle();\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      getECData(curve).dataType = 'edge';\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n        var node = this.getGraph().getNodeByIndex(dataIndex);\n        var value = node.getLayout().value;\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n        return createTooltipMarkup('nameValue', {\n          name: name_1 != null ? name_1 + '' : null,\n          value: value,\n          noValue: noValue(value)\n        });\n      }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    edgeLabel: {\n      show: false,\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData } from '../../util/model.js';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\n * Get the layout position of the whole view\n */\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node.\n *\n * Here we use Kahn algorithm to detect cycle when we traverse\n * the node to computer the initial x position.\n */\n\n\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = []; // Storage each node's indegree.\n\n  var indegreeArr = []; // Used to storage the node with indegree is equal to 0.\n\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0; // let kx = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\n\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\n\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param nodes.  node of sankey view.\n * @param maxDepth.  use to assign to node without outEdges as x-position.\n */\n\n\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param nodes  node of sankey view\n * @param kx   multiple used to scale nodes\n */\n\n\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param nodes  node of sankey view\n * @param edges  edge of sankey view\n * @param height  the whole height of the area to draw the view\n * @param nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param iterations  the number of iterations for the algorithm\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\n\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\n * Compute the original y-position for each node\n */\n\n\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\n\n    dy = y0 - nodeGap - viewWidth;\n\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n * @param nodesByBreadth\n * @param alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\n\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\n\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\n\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\n\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\n * Compute the depth(y-position) of each edge\n */\n\n\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n\n    if (edges.length) {\n      zrUtil.each(edges, function (edge) {\n        var edgeStyle = edge.getModel().get('lineStyle');\n        edge.setVisual('style', edgeStyle);\n      });\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SankeyView from './SankeyView.js';\nimport SankeySeriesModel from './SankeySeries.js';\nimport sankeyLayout from './sankeyLayout.js';\nimport sankeyVisual from './sankeyVisual.js';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar BoxplotSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotSeriesModel, _super);\n\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotSeriesModel.type; // TODO\n    // box width represents group size, so dimension should have 'size'.\n\n    /**\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\n     * The meanings of 'min' and 'max' depend on user,\n     * and echarts do not need to know it.\n     * @readOnly\n     */\n\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\n\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar BoxplotView =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotView, _super);\n\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data; // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\n\nvar BoxPathShape =\n/** @class */\nfunction () {\n  function BoxPathShape() {}\n\n  return BoxPathShape;\n}();\n\nvar BoxPath =\n/** @class */\nfunction (_super) {\n  __extends(BoxPath, _super);\n\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n\n    ctx.closePath();\n\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n\n  return BoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\n\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\n\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nexport default BoxplotView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../../util/number.js';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n\n    if (!seriesModels.length) {\n      return;\n    }\n\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\n\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\n\n\nfunction calculateBase(groupItem) {\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    var extent = baseAxis.getExtent();\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\n\n\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n\n    return point;\n  }\n\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { quantile, asc } from '../../util/number.js';\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\n/**\n * See:\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\n *\n * Helper method for preparing data.\n *\n * @param rawData like\n *        [\n *            [12,232,443], (raw data set for the first box)\n *            [3843,5545,1232], (raw data set for the second box)\n *            ...\n *        ]\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\n *      If 'none'/0 passed, min bound will not be used.\n */\n\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareBoxplotData from './prepareBoxplotData.js';\nimport { throwError, makePrintable } from '../../util/log.js';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n\n      throwError(errMsg);\n    }\n\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoxplotSeriesModel from './BoxplotSeries.js';\nimport BoxplotView from './BoxplotView.js';\nimport boxplotLayout from './boxplotLayout.js';\nimport { boxplotTransform } from './boxplotTransform.js';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath(); // Clear previously rendered progressive elements.\n\n    this._progressiveEls = null;\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n\n      this._progressiveEls.push(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) // Use color for border color by default.\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\n\n  if (sign === 0) {\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\n  } // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\n * Get the sign of a single data.\n *\n * @returns 0 for doji with hasDojiColor: true,\n *          1 for positive,\n *          -1 for negative.\n */\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport SymbolClz from './Symbol.js';\n\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\n\nvar EffectSymbol =\n/** @class */\nfunction (_super) {\n  __extends(EffectSymbol, _super);\n\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n\n    _this.add(symbol);\n\n    _this.add(rippleGroup);\n\n    _this.updateData(data, idx);\n\n    return _this;\n  }\n\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Update effect symbol\n   */\n\n\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\n\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    var emphasisModel = itemModel.getModel('emphasis');\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n\n    this._effectCfg = effectCfg;\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  ;\n\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    cb && cb();\n  };\n\n  ;\n  return EffectSymbol;\n}(Group);\n\nexport default EffectSymbol;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport EffectSymbol from '../helper/EffectSymbol.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\n\nvar EffectScatterView =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterView, _super);\n\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n\n    this._symbolDraw.updateLayout();\n  };\n\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\n\nexport default EffectScatterView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar EffectScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // 图形类型\n    symbolSize: 10 // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2\n    // symbolRotate: null,  // 图形旋转控制\n    // itemStyle: {\n    //     opacity: 1\n    // }\n\n  };\n  return EffectScatterSeriesModel;\n}(SeriesModel);\n\nexport default EffectScatterSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport EffectScatterView from './EffectScatterView.js';\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Provide effect for line\n */\n\nimport * as graphic from '../../util/graphic.js';\nimport Line from './Line.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as curveUtil from 'zrender/lib/core/curve.js';\n\nvar EffectLine =\n/** @class */\nfunction (_super) {\n  __extends(EffectLine, _super);\n\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n\n    _this._updateEffectSymbol(lineData, idx);\n\n    return _this;\n  }\n\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    } // Symbol may be removed if loop is false\n\n\n    if (!symbol) {\n      return;\n    } // Shadow color is same with color in default\n\n\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n\n    if (!symbol) {\n      return;\n    }\n\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var roundTrip = effectModel.get('roundTrip');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    }); // Ignore when updating\n\n    symbol.ignore = true;\n\n    this._updateAnimationPoints(symbol, points);\n\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\n      symbol.stopAnimation();\n      var delayNum = void 0;\n\n      if (zrUtil.isFunction(delayExpr)) {\n        delayNum = delayExpr(idx);\n      } else {\n        delayNum = delayExpr;\n      }\n\n      if (symbol.__t > 0) {\n        delayNum = -period * symbol.__t;\n      }\n\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\n    }\n\n    this._period = period;\n    this._loop = loop;\n    this._roundTrip = roundTrip;\n  };\n\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\n    if (period > 0) {\n      symbol.__t = 0;\n      var self_1 = this;\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\n        __t: roundTrip ? 2 : 1\n      }).delay(delayNum).during(function () {\n        self_1._updateSymbolPosition(symbol);\n      });\n\n      if (!loop) {\n        animator.done(function () {\n          self_1.remove(symbol);\n        });\n      }\n\n      animator.start();\n    }\n  };\n\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n\n    this._updateEffectSymbol(lineData, idx);\n  };\n\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\n\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2; // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05; // make sure the last segment render within endPoint\n\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  return EffectLine;\n}(graphic.Group);\n\nexport default EffectLine;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\n\nvar Polyline =\n/** @class */\nfunction (_super) {\n  __extends(Polyline, _super);\n\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createPolyline(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n    }\n\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = emphasisLineStyle;\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  ;\n\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n\n  ;\n  return Polyline;\n}(graphic.Group);\n\nexport default Polyline;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline.js';\nimport EffectLine from './EffectLine.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\n\nvar EffectPolyline =\n/** @class */\nfunction (_super) {\n  __extends(EffectPolyline, _super);\n\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  } // Override\n\n\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n\n    var lastFrame = this._lastFrame;\n    var frame;\n\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, len - 2);\n    }\n\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n\n  ;\n  return EffectPolyline;\n}(EffectLine);\n\nexport default EffectPolyline;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Batch by color\n\nimport * as graphic from '../../util/graphic.js';\nimport * as lineContain from 'zrender/lib/contain/line.js';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\nimport { getECData } from '../../util/innerStore.js';\n\nvar LargeLinesPathShape =\n/** @class */\nfunction () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n\n  return LargeLinesPathShape;\n}();\n\nvar LargeLinesPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeLinesPath, _super);\n\n  function LargeLinesPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n\n  LargeLinesPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var i;\n\n    if (shape.polyline) {\n      for (i = this._off; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (i = this._off; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n\n    if (shape.polyline) {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n\n        dataIndex++;\n      }\n    }\n\n    return -1;\n  };\n\n  LargeLinesPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n\n    this.hoverDataIdx = -1;\n    return false;\n  };\n\n  LargeLinesPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.segs;\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\n    }\n\n    return rect;\n  };\n\n  return LargeLinesPath;\n}(graphic.Path);\n\nvar LargeLineDraw =\n/** @class */\nfunction () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  LargeLineDraw.prototype.updateData = function (data) {\n    this._clear();\n\n    var lineEl = this._create();\n\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data);\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clear();\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lastAdded = this._newAdded[0];\n    var linePoints = data.getLayout('linesPoints');\n    var oldSegs = lastAdded && lastAdded.shape.segs; // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n    if (oldSegs && oldSegs.length < 2e4) {\n      var oldLen = oldSegs.length;\n      var newSegs = new Float32Array(oldLen + linePoints.length); // Concat two array\n\n      newSegs.set(oldSegs);\n      newSegs.set(linePoints, oldLen);\n      lastAdded.setShape({\n        segs: newSegs\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n\n      var lineEl = this._create();\n\n      lineEl.incremental = true;\n      lineEl.setShape({\n        segs: linePoints\n      });\n\n      this._setCommon(lineEl, data);\n\n      lineEl.__startIndex = taskParams.start;\n    }\n  };\n  /**\n   * @override\n   */\n\n\n  LargeLineDraw.prototype.remove = function () {\n    this._clear();\n  };\n\n  LargeLineDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n\n  LargeLineDraw.prototype._create = function () {\n    var lineEl = new LargeLinesPath({\n      cursor: 'default',\n      ignoreCoarsePointer: true\n    });\n\n    this._newAdded.push(lineEl);\n\n    this.group.add(lineEl);\n    return lineEl;\n  };\n\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n\n    lineEl.setStyle('fill', null);\n    var ecData = getECData(lineEl); // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n\n    ecData.seriesIndex = hostModel.seriesIndex;\n    lineEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = lineEl.hoverDataIdx;\n\n      if (dataIndex > 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\n      }\n    });\n  };\n\n  ;\n\n  LargeLineDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n\n  ;\n  return LargeLineDraw;\n}();\n\nexport default LargeLineDraw;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { error } from '../../util/log.js';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('The lines series must have a coordinate system.');\n      }\n\n      return;\n    }\n\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function (params, lineData) {\n        var lineCoords = [];\n\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n\n          var offset = 0;\n          var pt = [];\n\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw.js';\nimport EffectLine from '../helper/EffectLine.js';\nimport Line from '../helper/Line.js';\nimport Polyline from '../helper/Polyline.js';\nimport EffectPolyline from '../helper/EffectPolyline.js';\nimport LargeLineDraw from '../helper/LargeLineDraw.js';\nimport linesLayout from './linesLayout.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport ChartView from '../../view/Chart.js';\n\nvar LinesView =\n/** @class */\nfunction (_super) {\n  __extends(LinesView, _super);\n\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesView.type;\n    return _this;\n  }\n\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    } // Config layer with motion blur\n\n\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n\n    if (this._showEffect(seriesModel) && trailLength > 0) {\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.warn('SVG render mode doesn\\'t support lines with trail effect');\n      }\n    }\n\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    lineDraw.incrementalPrepareUpdate(data);\n\n    this._clearLayer(api);\n\n    this._finished = false;\n  };\n\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  LinesView.prototype.eachRendered = function (cb) {\n    this._lineDraw && this._lineDraw.eachRendered(cb);\n  };\n\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      } // Not in large mode\n\n\n      this._lineDraw.updateLayout();\n\n      this._clearLayer(api);\n    }\n  };\n\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n\n    var hasEffect = this._showEffect(seriesModel);\n\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n    }\n\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null; // Clear motion when lineDraw is removed\n\n    this._clearLayer(api);\n  };\n\n  LinesView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\n\nexport default LinesView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\n\nimport SeriesModel from '../../model/Series.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LinesSeriesModel, _super);\n\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\n\n    compatEc2(option);\n\n    var result = this._processFlatCoordsArray(option.data);\n\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n\n    _super.prototype.init.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n\n      params.data = new Float32Array(result.count);\n    }\n\n    this.getRawData().appendData(params.data);\n  };\n\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n\n    return coords;\n  };\n\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n\n      return coords.length;\n    }\n  };\n\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    } // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n\n\n    if (isNumber(data[0])) {\n      var len = data.length; // Store offset and len of each segment\n\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++]; // Offset\n\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\n\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n\n      if (!CoordSys) {\n        throw new Error('Unknown coordinate system ' + option.coordinateSystem);\n      }\n    }\n\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  LinesSeriesModel.prototype.getZLevelKey = function () {\n    var effectModel = this.getModel('effect');\n    var trailLength = effectModel.get('trailLength');\n    return this.getData().count() > this.getProgressiveThreshold() // Each progressive series has individual key.\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\n  };\n\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end' // distance: 5,\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\n\nexport default LinesSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function (seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LinesView from './LinesView.js';\nimport LinesSeriesModel from './LinesSeries.js';\nimport linesLayout from './linesLayout.js';\nimport linesVisual from './linesVisual.js';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Uint8ClampedArray */\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar GRADIENT_LEVELS = 256;\n\nvar HeatmapLayer =\n/** @class */\nfunction () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = platformApi.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param data array of data, each has x, y, value\n   * @param width canvas width\n   * @param height canvas height\n   */\n\n\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2]; // calculate alpha using value\n\n      var alpha = normalize(value); // draw with the circle brush with alpha\n\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    } // colorize the canvas using alpha value and set with gradient\n\n\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\n\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   */\n\n\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas()); // set brush size\n\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\n\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\n   * get gradient color map\n   * @private\n   */\n\n\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n\n    return pixelsSingleState;\n  };\n\n  return HeatmapLayer;\n}();\n\nexport default HeatmapLayer;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport HeatmapLayer from './HeatmapLayer.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\n\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i; // Try to find in the location of the last found\n\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n\n    return i >= 0 && i < len && selected[i];\n  };\n}\n\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\n\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions; // Not use coordSys.type === 'geo' because coordSys maybe extended\n\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\n\nvar HeatmapView =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapView, _super);\n\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    } // Clear previously rendered progressive elements.\n\n\n    this._progressiveEls = null;\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._progressiveEls = [];\n\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n\n  HeatmapView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n\n    if (isCartesian2d) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      } // add 0.5px to avoid the gaps\n\n\n      width = xAxis.getBandWidth() + .5;\n      height = yAxis.getBandWidth() + .5;\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n\n      if (isCartesian2d) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx); // Ignore empty data and out of extent data\n\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      } // Optimization for large dataset\n\n\n      if (data.hasItemOption) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel_1 = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle(); // Each item value struct in the data would be firstly\n        // {\n        //     itemStyle: { borderRadius: [30, 30] },\n        //     value: [2022, 02, 22]\n        // }\n\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\n        focus = emphasisModel_1.get('focus');\n        blurScope = emphasisModel_1.get('blurScope');\n        emphasisDisabled = emphasisModel_1.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n\n      rect.shape.r = borderRadius;\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\n      rect.incremental = incremental; // PENDING\n\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n\n      if (this._progressiveEls) {\n        this._progressiveEls.push(rect);\n      }\n    }\n  };\n\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform); // Clamp on viewport\n\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\n\nexport default HeatmapView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\n\nvar HeatmapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapSeriesModel, _super);\n\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\n\nexport default HeatmapSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport HeatmapView from './HeatmapView.js';\nimport HeatmapSeriesModel from './HeatmapSeries.js';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport { parsePercent, isNumeric } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\n\nvar PictorialBarView =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarView, _super);\n\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  };\n\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView); // Set or calculate default value about symbol, and calculate layout info.\n\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  outputSymbolMeta.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  } // if 'pxSign' means sign of pixel,  it can't be zero, or symbolScale will be zero\n  // and when borderWidth be settled, the actual linewidth will be NaN\n\n\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : -1;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  outputSymbolMeta.valueLineWidth = valueLineWidth || 0;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    } // updateHoverAnimation(path, symbolMeta);\n\n\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    barRect.disableMorphing = true;\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var paths = [];\n  eachPath(bar, function (path) {\n    paths.push(path);\n  });\n  bar.__pictorialMainPath && paths.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(paths, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  toggleHoverEmphasis(bar, focus, blurScope, emphasisModel.get('disabled'));\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nexport default PictorialBarView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar PictorialBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default PictorialBarSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PictorialBarView from './PictorialBarView.js';\nimport PictorialBarSeriesModel from './PictorialBarSeries.js';\nimport { createProgressiveLayout, layout } from '../../layout/barGrid.js';\nimport { curry } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'pictorialBar')); // Do layout after other overall layout, which can prepare some information.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('pictorialBar'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gave\n   * @param  ecModel  the model object for themeRiver option\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n */\n\nvar SunburstPiece =\n/** @class */\nfunction (_super) {\n  __extends(SunburstPiece, _super);\n\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n\n    _this.setTextContent(text);\n\n    _this.updateData(true, node, seriesModel, ecModel, api);\n\n    return _this;\n  }\n\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle(); // border radius\n\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n\n    sector.useStyle(normalStyle);\n\n    this._updateLabel(seriesModel);\n\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\n\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n\n      if (text) {\n        state.style.text = text;\n      } // Not displaying text when angle is too small\n\n\n      var isShown = labelStateModel.get('show');\n\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          // Put label in the center if it's a circle\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\n            r = 0;\n          } else {\n            r = (layout.r + layout.r0) / 2;\n          }\n\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'right';\n          }\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'left';\n          }\n        }\n      }\n\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var rotate = 0;\n\n      if (rotateType === 'radial') {\n        rotate = normalizeRadian(-midAngle);\n\n        if (rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n          rotate += Math.PI;\n        }\n      } else if (rotateType === 'tangential') {\n        rotate = Math.PI / 2 - midAngle;\n\n        if (rotate > Math.PI / 2) {\n          rotate -= Math.PI;\n        } else if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (zrUtil.isNumber(rotateType)) {\n        rotate = rotateType * Math.PI / 180;\n      }\n\n      state.rotation = rotate;\n    });\n\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n\n      return stateAttr;\n    }\n\n    label.dirtyStyle();\n  };\n\n  return SunburstPiece;\n}(graphic.Sector);\n\nexport default SunburstPiece;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog } from '../../util/log.js';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\n    } // Fast forward action\n\n\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\n    }\n\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport SunburstPiece from './SunburstPiece.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar SunburstView =\n/** @class */\nfunction (_super) {\n  __extends(SunburstView, _super);\n\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstView.type;\n    return _this;\n  }\n\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        } // TODO event scope\n\n\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n\n      var viewRoot = _this.seriesModel.getViewRoot();\n\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\n   * @implement\n   */\n\n\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\n\nexport default SunburstView;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport Model from '../../model/Model.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\n\nvar SunburstSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SunburstSeriesModel, _super);\n\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\n   * @override\n   */\n\n\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outer\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type can be expansion, scale.\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value; // TODO First value of array must be a number\n\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nexport default SunburstSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent } from '../../util/number.js';\nimport * as zrUtil from 'zrender/lib/core/util.js'; // let PI2 = Math.PI * 2;\n\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n */\n\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\n\n\nfunction sort(children, sortOrder) {\n  if (zrUtil.isFunction(sortOrder)) {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { lift } from 'zrender/lib/tool/color.js';\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {}; // Default color strategy\n\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n\n    if (node.depth > 1 && isString(color)) {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n\n    return color;\n  }\n\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SunburstView from './SunburstView.js';\nimport SunburstSeriesModel from './SunburstSeries.js';\nimport sunburstLayout from './sunburstLayout.js';\nimport sunburstVisual from './sunburstVisual.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport { installSunburstAction } from './sunburstAction.js';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { makeInner } from '../../util/model.js';\nimport SeriesModel from '../../model/Series.js'; // Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\n\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\nexport var customInnerStore = makeInner();\n\nvar CustomSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CustomSeriesModel, _super);\n\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n\n  };\n  return CustomSeriesModel;\n}(SeriesModel);\n\nexport default CustomSeriesModel;", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\n\nexport default function cartesianPrepareCustom(coordSys) {\n  var rect = coordSys.master.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nexport default function geoPrepareCustom(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      zoom: coordSys.getZoom()\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" and noRoam param,\n        // Compatible with this usage:\n        // echarts.util.map(item.points, api.coord)\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind } from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\n\nexport default function singlePrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (val) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(val);\n      },\n      size: bind(dataToCoordSize, coordSys)\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // import AngleAxis from './AngleAxis.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var getterName = 'get' + dim + 'Axis'; // TODO: TYPE Check Angle Axis\n\n    var axis = this[getterName]();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n\n    return result;\n  }, this);\n}\n\nexport default function polarPrepareCustom(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: function (data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function calendarPrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: function (data, clamp) {\n        return coordSys.dataToPoint(data, clamp);\n      }\n    }\n  };\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\n\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\n\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\n\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\n\nvar CustomChartView =\n/** @class */\nfunction (_super) {\n  __extends(CustomChartView, _super);\n\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  };\n\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that are triggered by its descendents.\n\n\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\n\nexport default CustomChartView;\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n\n    if (!Clz) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n\n      throwError(errMsg);\n    }\n\n    el = new Clz();\n  }\n\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\n\nfunction updateElNormal( // Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  } // Default transition ['x', 'y']\n\n\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  } // Do some normalization on style.\n\n\n  var styleOpt = elOption && elOption.style;\n\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    } // Always overwrite in case user specify this prop.\n\n\n    styleOpt.__decalPattern = decalPattern;\n  }\n\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\n\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\n\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable default emphasis.\n      stateObj.style = styleOpt || null;\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n\n\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n\n    setDefaultStateProxy(elDisplayable);\n  }\n}\n\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\n\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\n\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\n\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n\n\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\n   * like other series. But it is not necessary and not easy to give a strict definition\n   * of what it returns. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    } // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n\n\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n\n\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\n\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n\n  var isInit = !existsEl;\n  var el = existsEl;\n\n  if (!el) {\n    el = createEl(elOption);\n\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  } // Need to set morph: false explictly to disable automatically morphing.\n\n\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n\n  updateZ(el, elOption, seriesModel);\n\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n\n  return el;\n} // `el` must not be null/undefined.\n\n\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (// Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n\n      el.setClipPath(clipPath);\n    }\n\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  } // If not define `clipPath` in option, do nothing unnecessary.\n\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // Group does not support textContent temporarily until necessary.\n  if (el.isGroup) {\n    return;\n  } // Normal must be called before emphasis, for `isLegacy` detection.\n\n\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\n\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorrcet type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\n\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\n\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n\n  return style;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\n//     that the existing children will not be removed, and enables the feature\n//     that update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\n//     happen.\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\n//     `el` is a group, and if any of the new child is null, it means to remove\n//     the element at the same index, if exists. On the other hand, if the new\n//     child is and empty object `{}`, it means to keep the element not changed.\n//\n// For implementation simpleness, do not provide a direct way to remove single\n// child (otherwise the total indices of the children array have to be modified).\n// User can remove a single child by setting its `ignore` to `true`.\n\n\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    var newChild = newChildren[index];\n    var oldChild = el.childAt(index);\n\n    if (newChild) {\n      if (newChild.ignore == null) {\n        // The old child is set to be ignored if null (see comments\n        // below). So we need to set ignore to be false back.\n        newChild.ignore = false;\n      }\n\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\n      } // If the new element option is null, it means to remove the old\n      // element. But we cannot really remove the element from the group\n      // directly, because the element order may not be stable when this\n      // element is added back. So we set the element to be ignored.\n\n\n      oldChild.ignore = true;\n    }\n  }\n\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    var child = el.childAt(i);\n    removeChildFromGroup(el, child, seriesModel);\n  }\n}\n\nfunction removeChildFromGroup(group, child, seriesModel) {\n  // Do not support leave elements that are not mentioned in the latest\n  // `renderItem` return. Otherwise users may not have a clear and simple\n  // concept that how to control all of the elements.\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\n * @return SVG Path data.\n */\n\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}", "\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CustomSeriesModel from './CustomSeries.js';\nimport CustomChartView from './CustomView.js';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}"],
  "mappings": "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",
  "names": ["LineSeriesModel", "len", "ECPolylineShape", "ECPolyline", "len", "ECPolygonShape", "ECPolygon", "len", "len", "isPointNull", "LineView", "dataIndex", "i", "el", "data", "sum", "install", "BaseBarSeriesModel", "BarSeriesModel", "SausageShape", "SausagePath", "PI2", "opts", "mathMax", "mathMin", "BarView", "layout", "scale", "len", "isRadial", "position", "LagePathShape", "LargePath", "install", "center", "parsePercent", "sum", "RADIAN", "i", "dx", "len", "layout", "dist", "label", "labelLine", "parsePercent", "linePoints", "PI", "selectState", "PiePiece", "layout", "PieView", "LegendVisualProvider", "PieSeriesModel", "install", "ScatterSeriesModel", "LargeSymbolPathShape", "LargeSymbolPath", "LargeSymbolDraw", "len", "ScatterView", "install", "RadarView", "createSymbol", "data", "RadarSeriesModel", "len", "install", "MapView", "layout", "MapSeries", "len", "center", "sum", "len", "data", "layout", "install", "separation", "getViewRect", "TreeEdgeShape", "TreePath", "parsePercent", "TreeView", "layout", "center", "TreeNode", "len", "layout", "Tree", "len", "TreeSeriesModel", "center", "separation", "getViewRect", "layout", "separation", "install", "TreemapSeriesModel", "sum", "Breadcrumb", "AnimationWrap", "len", "inner", "TreemapView", "getKey", "willDeleteEls", "create", "scale", "group", "bg", "content", "thisLayout", "depth", "inner", "mathMax", "mathMin", "each", "parsePercent", "each", "mathMax", "mathMin", "len", "sum", "scale", "layout", "install", "normalize", "symbolType", "symbolSize", "len", "keys", "clone", "layout", "clone", "sum", "scaleAndAdd", "center", "clone", "i", "n", "edges", "getViewRect", "quadraticAt", "center", "scale", "quadraticSubdivide", "clone", "GraphView", "forceLayout", "layout", "Graph", "len", "GraphNode", "GraphEdge", "layout", "GraphSeriesModel", "center", "install", "PointerShape", "PointerPath", "center", "parsePercent", "GaugeView", "sector", "percent", "i", "endAngle", "value", "GaugeSeriesModel", "install", "FunnelPiece", "layout", "labelLayout", "FunnelView", "FunnelSeriesModel", "sum", "getViewRect", "sort", "len", "layout", "parsePercent", "idx", "install", "ParallelView", "ParallelSeriesModel", "opacityAccessPath", "install", "SankeyPathShape", "SankeyPath", "SankeyView", "layout", "createGridClipShape", "SankeySeriesModel", "layout", "getViewRect", "node", "sum", "len", "install", "WhiskerBoxCommonMixin", "BoxplotSeriesModel", "BoxplotView", "BoxPathShape", "BoxPath", "each", "parsePercent", "axisDimVal", "dataIndex", "ends", "install", "CandlestickView", "createNormalBox", "createLarge", "NormalBoxPathShape", "NormalBoxPath", "transInit", "LargeBoxPathShape", "LargeBoxPath", "CandlestickSeriesModel", "data", "axisDimVal", "ends", "lowestVal", "highestVal", "parsePercent", "install", "EffectSymbol", "EffectScatterView", "clone", "EffectScatterSeriesModel", "install", "EffectLine", "Line_default", "idx", "quadraticAt", "quadraticDerivativeAt", "Polyline", "Polyline_default", "EffectPolyline", "Polyline_default", "len", "LargeLinesPathShape", "LargeLinesPath", "containStroke", "LargeLineDraw", "len", "LinesView", "Polyline_default", "Line_default", "LinesSeriesModel", "len", "normalize", "data", "symbolType", "symbolSize", "install", "HeatmapLayer", "normalize", "len", "len", "HeatmapView", "HeatmapSeriesModel", "install", "PictorialBarView", "layout", "isAnimationEnabled", "parsePercent", "path", "index", "position", "PictorialBarSeriesModel", "install", "ThemeRiverView", "process", "layout", "createGridClipShape", "createGridClipShape", "ThemeRiverSeriesModel", "dist", "parsePercent", "sum", "install", "SunburstPiece", "layout", "cornerRadius", "SunburstView", "newChildren", "oldChildren", "getKey", "removeNode", "virtualRoot", "SunburstSeriesModel", "completeTreeValue", "sum", "RADIAN", "center", "parsePercent", "sort", "initChildren", "sum", "renderNode", "startAngle", "angle", "rStart", "rEnd", "node", "install", "CustomSeriesModel", "dataToCoordSize", "dataToCoordSize", "dataToCoordSize", "radius", "CustomChartView", "el", "getItemModel", "style", "mergeChildren", "install"]
}
